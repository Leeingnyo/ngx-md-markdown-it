!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("rxjs"),require("@angular/platform-browser"),require("markdown-it"),require("markdown-it-footnote"),require("@angular/common"),require("prismjs"),require("rxjs/operators"),require("@angular/common/http"),require("@angular/core")):"function"==typeof define&&define.amd?define("ngx-md",["exports","rxjs","@angular/platform-browser","markdown-it","markdown-it-footnote","@angular/common","prismjs","rxjs/operators","@angular/common/http","@angular/core"],t):t(e["ngx-md"]={},e.rxjs,e.ng.platformBrowser,e.MarkdownIt,e.MarkdownItFootnote,e.ng.common,e.Prism,e.rxjs.operators,e.ng.common.http,e.ng.core)}(this,function(e,o,t,r,n,i,a,s,p,u){"use strict";r=r&&r.hasOwnProperty("default")?r["default"]:r,n=n&&n.hasOwnProperty("default")?n["default"]:n;var c=function(){function e(e,t){this._http=e,this._domSanitizer=t,this._renderer=r({linkify:!0,html:!0}).use(n),this.extendRenderer(),this.setMarkedOptions({})}return e.prototype.getContent=function(e){return this._http.get(e,{responseType:"text"}).pipe(s.map(function(e){return e}),s.catchError(this.handleError))},e.prototype.setMarkedOptions=function(e){e=Object.assign({gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!0,smartypants:!1},e)},e.prototype.compile=function(e){return this._renderer.render(e)},e.prototype.extendRenderer=function(){var a=this._renderer.renderer.rules.link_open||function(e,t,r,n,o){return o.renderToken(e,t,r)};this._renderer.renderer.rules.link_open=function(e,t,r,n,o){var i=e[t].attrIndex("target");return i<0?e[t].attrPush(["target","_blank"]):e[t].attrs[i][1]="_blank",a(e,t,r,n,o)};var p=location.origin+location.pathname+location.search;this._renderer.renderer.rules.footnote_ref=function(e,t,r,n,o){var i=o.rules.footnote_anchor_name(e,t,r,n,o),a=o.rules.footnote_caption(e,t,r,n,o),s=i;return 0<e[t].meta.subId&&(s+=":"+e[t].meta.subId),'<sup class="footnote-ref"><a href="'+p+"#fn"+i+'" id="fnref'+s+'">'+a+"</a></sup>"},this._renderer.renderer.rules.footnote_anchor=function(e,t,r,n,o){var i=o.rules.footnote_anchor_name(e,t,r,n,o);return 0<e[t].meta.subId&&(i+=":"+e[t].meta.subId),' <a href="'+p+"#fnref"+i+'" class="footnote-backref">↩︎</a>'}},e.prototype.handleError=function(e){var t;if(e instanceof fetch){var r=e.json()||"",n=r.error||JSON.stringify(r);t=e.status+" - "+(e.statusText||"")+" "+n}else t=e.message?e.message:e.toString();return o.throwError(t)},e.decorators=[{type:u.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:p.HttpClient},{type:t.DomSanitizer}]},e.ngInjectableDef=u.defineInjectable({factory:function(){return new e(u.inject(p.HttpClient),u.inject(t.DomSanitizer))},token:e,providedIn:"root"}),e}(),h=function(){function e(e,t,r){this._mdService=e,this._el=t,this.platformId=r,this.changeLog=[],this.errror=new u.EventEmitter,this.loaded=new u.EventEmitter,this.sanitizeHtml=!0}return Object.defineProperty(e.prototype,"path",{set:function(e){e&&(this._path=e,this.onPathChange())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{set:function(e){e&&(this._data=e,this.onDataChange(e))},enumerable:!0,configurable:!0}),e.prototype.onDataChange=function(e){this._el.nativeElement.innerHTML=e?this._mdService.compile(e):"",this.highlightContent(!1)},e.prototype.ngAfterViewInit=function(){this._path?this.onPathChange():this._data||this.processRaw()},e.prototype.processRaw=function(){this._md=this.prepare(function r(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}(this._el.nativeElement.innerHTML)),this._el.nativeElement.innerHTML=this._mdService.compile(this._md),this.highlightContent(!1)},e.prototype.onPathChange=function(){var t=this;this._ext=this._path&&this._path.split(".").splice(-1).join(),this._mdService.getContent(this._path).pipe(s.catchError(this.handleError)).subscribe(function(e){t.loaded.emit(e),t._md="md"!==t._ext?"```"+t._ext+"\n"+e+"\n```":e,t._el.nativeElement.innerHTML=t._mdService.compile(t.prepare(t._md)),t.highlightContent(!1)})},e.prototype.handleError=function(e){return this.errror.emit(e),console.error("An error occurred",e),e.message||e},e.prototype.prepare=function(e){var t=this;if(!e)return"";if("md"!==this._ext&&this.path)return e.replace(/\"/g,"'");var r=!1;return e.split("\n").map(function(e){return"```"===t.trimLeft(e).substring(0,3)&&(r=!r),r?e:e.trim()}).join("\n")},e.prototype.trimLeft=function(e){return e.replace(/^\s+|\s+$/g,"")},e.prototype.highlightContent=function(e){i.isPlatformBrowser(this.platformId)&&a.highlightAll(e)},e.decorators=[{type:u.Component,args:[{selector:"markdown,[Markdown],ngx-md,[NgxMd]",template:"<ng-content></ng-content>",styles:[".token.operator, .token.entity, .token.url, .language-css .token.string, .style .token.string {\n            background: none;\n        }\n        .md-checkbox{\n            vertical-align: middle; margin: 0 0.2em 0.25em -1.6em; font-size: 16px;\n        }"]}]}],e.ctorParameters=function(){return[{type:c},{type:u.ElementRef},{type:String,decorators:[{type:u.Inject,args:[u.PLATFORM_ID]}]}]},e.propDecorators={path:[{type:u.Input}],data:[{type:u.Input}],sanitizeHtml:[{type:u.Input}]},e}();var d=function(){function e(){}return e.decorators=[{type:u.Injectable}],e}(),l=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[d]}},e.decorators=[{type:u.NgModule,args:[{imports:[p.HttpClientModule],declarations:[h],providers:[c],exports:[h]}]}],e}();e.NgxMdService=c,e.NgxMdComponent=h,e.NgxMdModule=l,e.ɵa=d,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-md.umd.min.js.map